<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MENU â€” Daily All Day Pune</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body{
 margin:0;
 font-family:Poppins,sans-serif;
 background:#0f1114;
 color:#fff;
}

/* HEADER */
header{
 position:sticky;
 top:0;
 z-index:1000;
 background:#0f1114;
 padding:14px;
 text-align:center;
 font-weight:600;
 border-bottom:1px solid #1f2227;
}

/* SEARCH + FILTER */
.topbar{
 position:sticky;
 top:56px;
 background:#0f1114;
 padding:10px;
 border-bottom:1px solid #1f2227;
}

.search{
 width:100%;
 padding:10px;
 border-radius:12px;
 border:none;
 background:#1a1d22;
 color:#fff;
 font-size:14px;
 margin-bottom:8px;
}

.filters{
 display:flex;
 gap:8px;
 overflow-x:auto;
}

.filters button{
 background:#1a1d22;
 border:none;
 color:#fff;
 padding:6px 12px;
 border-radius:20px;
 font-size:12px;
 cursor:pointer;
 white-space:nowrap;
}

.filters button.active{
 background:#ffb703;
 color:#000;
}

/* CATEGORY NAV */
.nav{
 position:sticky;
 top:120px;
 background:#0f1114;
 display:flex;
 gap:14px;
 overflow-x:auto;
 padding:10px;
 border-bottom:1px solid #1f2227;
}

.nav a{
 color:#ffb703;
 text-decoration:none;
 font-size:13px;
 white-space:nowrap;
}

/* SECTION */
.section{
 padding:12px;
}

/* CATEGORY TITLE */
.category{
 margin:18px 0 10px;
 font-weight:600;
 font-size:16px;
 color:#ffb703;
 border-left:3px solid #ffb703;
 padding-left:8px;
 scroll-margin-top:160px;
}

/* CARD */
.card{
 background:#161a20;
 border-radius:14px;
 padding:10px;
 margin-bottom:10px;
 box-shadow:0 2px 6px rgba(0,0,0,0.4);
}

.item{
 display:flex;
 align-items:center;
 justify-content:space-between;
 cursor:pointer;
}

.left{
 display:flex;
 align-items:center;
 gap:10px;
}

/* IMAGE */
.imgWrap{
 position:relative;
 width:56px;
 height:56px;
 border-radius:12px;
 overflow:hidden;
 flex-shrink:0;
}

.img{
 width:100%;
 height:100%;
 object-fit:cover;
}

/* BESTSELLER BADGE */
.ribbon{
 position:absolute;
 top:4px;
 left:4px;
 background:#ffb703;
 color:#000;
 font-size:9px;
 padding:2px 5px;
 border-radius:4px;
 font-weight:600;
}

/* VEG ICON */
.icon{
 width:16px;
 height:16px;
}

/* NAME */
.name{
 font-size:14px;
 font-weight:500;
}

/* SPICE DOTS */
.spice{
 display:flex;
 gap:2px;
 margin-top:2px;
}

.spice span{
 width:6px;
 height:6px;
 border-radius:50%;
 background:#333;
}

.spice .on{
 background:#ff4d4d;
}

/* PRICE */
.price{
 color:#ffb703;
 font-weight:600;
 font-size:15px;
}

/* MODAL */
#modal{
 display:none;
 position:fixed;
 inset:0;
 background:#000c;
 z-index:2000;
 align-items:center;
 justify-content:center;
}

.modalBox{
 background:#161a20;
 border-radius:18px;
 width:92%;
 max-width:360px;
 overflow:hidden;
}

.modalBox img{
 width:100%;
 height:230px;
 object-fit:cover;
}

.modalContent{
 padding:14px;
}

.modalName{
 font-weight:600;
 font-size:16px;
 margin-bottom:4px;
}

.modalType{
 font-size:13px;
 color:#bbb;
}

.modalPrice{
 color:#ffb703;
 font-weight:600;
 margin:6px 0;
}

.modalDesc{
 font-size:13px;
 color:#ccc;
}

.modalBtn{
 margin-top:12px;
 width:100%;
 padding:10px;
 border:none;
 border-radius:10px;
 background:#ffb703;
 color:#000;
 font-weight:600;
}
</style>
</head>

<body>

<header>MENU â€” Daily All Day Pune</header>

<div class="topbar">
<input class="search" id="search" placeholder="Search menu...">
<div class="filters">
<button data-f="all" class="active">All</button>
<button data-f="veg">Veg</button>
<button data-f="nonveg">NonVeg</button>
<button data-f="spicy">Spicy</button>
<button data-f="best">Bestseller</button>
</div>
</div>

<div class="nav" id="nav"></div>
<div class="section" id="menu"></div>

<!-- MODAL -->
<div id="modal">
 <div class="modalBox">
  <img id="m_img">
  <div class="modalContent">
   <div id="m_name" class="modalName"></div>
   <div id="m_type" class="modalType"></div>
   <div id="m_price" class="modalPrice"></div>
   <div id="m_desc" class="modalDesc"></div>
   <button class="modalBtn" onclick="closeModal()">Close</button>
  </div>
 </div>
</div>

<script>
let ALL_ROWS=[];

/* NORMALIZE */
function norm(v){
 return (v||"").toLowerCase().replace(/\s+/g,"").replace(/-/g,"");
}

/* CSV PARSER */
function parseCSV(text){
 return text.trim().split("\n").slice(1).map(r=>{
  const cols=r.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g) || [];
  return cols.map(v=>v.replace(/^"|"$/g,"").trim());
 });
}

/* MODAL */
function openModal(d){
 document.getElementById("modal").style.display="flex";
 document.getElementById("m_img").src="images/"+d.img;
 document.getElementById("m_name").textContent=d.name;
 document.getElementById("m_price").textContent=d.price;
 document.getElementById("m_desc").textContent=d.desc;

 let t="";
 if(d.type==="veg") t="ðŸŸ¢ Veg";
 if(d.type==="nonveg") t="ðŸ”´ Non-Veg";
 if(d.tags.includes("spicy")) t+=" ðŸŒ¶";
 if(d.tags.includes("bestseller")) t+=" â­";

 document.getElementById("m_type").textContent=t;
}

function closeModal(){
 document.getElementById("modal").style.display="none";
}

/* RENDER */
function render(rows){
 const menu=document.getElementById("menu");
 const nav=document.getElementById("nav");
 menu.innerHTML="";
 nav.innerHTML="";

 rows.forEach(cols=>{
  const name=cols[0];
  const price=parseFloat(cols[1]);
  const desc=cols[2]||"";
  const type=norm(cols[3]);
  const img=cols[4]||"";
  const tags=(cols[5]||"").toLowerCase().split("|").map(t=>norm(t));

  /* CATEGORY */
  if(price===0){
   const id=name.replace(/[^a-z0-9]/gi,"_");
   const h=document.createElement("div");
   h.className="category";
   h.id=id;
   h.textContent=name;
   menu.appendChild(h);

   const a=document.createElement("a");
   a.href="#"+id;
   a.textContent=name;
   nav.appendChild(a);
   return;
  }

  const card=document.createElement("div");
  card.className="card";

  const item=document.createElement("div");
  item.className="item";
  item.onclick=()=>openModal({name,price,desc,type,img,tags});

  const left=document.createElement("div");
  left.className="left";

  /* IMAGE */
  const wrap=document.createElement("div");
  wrap.className="imgWrap";

  if(img){
   const im=document.createElement("img");
   im.src="images/"+img;
   im.className="img";
   im.loading="lazy";
   wrap.appendChild(im);
  }

  if(tags.includes("bestseller")){
   const r=document.createElement("div");
   r.className="ribbon";
   r.textContent="â˜…";
   wrap.appendChild(r);
  }

  left.appendChild(wrap);

/* ICON */
if(type==="veg"||type==="nonveg"){
  const ic=document.createElement("img");
  ic.className="icon";
  ic.src = type==="veg" 
    ? "images/veg.webp" 
    : "images/nonveg.webp";
  left.appendChild(ic);
}

  /* NAME + SPICE */
  const nm=document.createElement("div");
  nm.className="name";
  nm.textContent=name;

  if(tags.includes("spicy")){
   const s=document.createElement("div");
   s.className="spice";
   s.innerHTML="<span class='on'></span><span class='on'></span><span></span>";
   nm.appendChild(s);
  }

  left.appendChild(nm);

  const pr=document.createElement("div");
  pr.className="price";
  pr.textContent=price;

  item.appendChild(left);
  item.appendChild(pr);
  card.appendChild(item);
  menu.appendChild(card);
 });
}

/* FILTER */
function applyFilter(){
 const f=document.querySelector(".filters button.active").dataset.f;
 const q=document.getElementById("search").value.toLowerCase();

 const filtered=ALL_ROWS.filter(r=>{
  const price=parseFloat(r[1]);
  if(price===0) return true;

  const name=(r[0]||"").toLowerCase();
  const type=norm(r[3]);
  const tags=(r[5]||"").toLowerCase().split("|").map(t=>norm(t));

  if(q && !name.includes(q)) return false;
  if(f==="veg" && type!=="veg") return false;
  if(f==="nonveg" && type!=="nonveg") return false;
  if(f==="spicy" && !tags.includes("spicy")) return false;
  if(f==="best" && !tags.includes("bestseller")) return false;

  return true;
 });

 render(filtered);
}

/* FILTER BUTTONS */
document.querySelectorAll(".filters button").forEach(b=>{
 b.onclick=()=>{
  document.querySelectorAll(".filters button").forEach(x=>x.classList.remove("active"));
  b.classList.add("active");
  applyFilter();
 };
});

document.getElementById("search").oninput=applyFilter;

/* GOOGLE SHEET */
fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vTuqOGAiEQYlgwacbHKi_QRJeVRYGQqFl844FbKFZye0Dbyy2GdFN-LnpcWXqDKdDWLyGYKYA2JeI1n/pub?gid=1882359850&single=true&output=csv&t="+Date.now())
 .then(r=>r.text())
 .then(t=>{
   ALL_ROWS=parseCSV(t);
   render(ALL_ROWS);
 });
</script>

</body>
</html>

